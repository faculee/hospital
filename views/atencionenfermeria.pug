extends layout

block content

  style.
    .navegacion-secciones .btn {
      background-color: #000;
      color: #fff;
      border: 2px solid #000;
      height: 40px;
      font-weight: bold;
      font-size: 1rem;
      transition: all 0.2s ease;
      border-radius: 8px;
    }
    .navegacion-secciones .btn:hover {
      background-color: #fff;
      color: #000;
      border-color: #000;
      transform: scale(1.03);
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
    .seccion {
      padding: 1.5rem;
      border-radius: 10px;
      margin-bottom: 2rem;
    }
    .seccion-1 { background-color: rgb(179, 203, 224); }
    .seccion-2 { background-color: rgb(171, 200, 226); }
    .titulo-seccion {
      text-align: center;
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }
    .table th {
      background-color: rgb(41, 108, 175);
      color: #f8f9fa;
      font-weight: bold;
      border: 1px solid rgb(41, 108, 175);
      text-align: center;
    }
    .table tbody td { border: 1px solid #dee2e6; }
    .navegacion-secciones {
      background-color: rgb(131, 184, 209);
      border: 1px solid #ccc;
      border-radius: 10px;
    }
    #mensajes { border-radius: 6px; font-size: 1rem; transition: all 0.3s ease; }
    .secciones-container {
      background-color: #fdfdfe;
      padding: 2rem;
      border-radius: 12px;
      margin-bottom: 3rem;
    }
    .col-fecha { width: 10%; text-align: center; }
    .col-medico { width: 25%; text-align: center; }
    .col-observaciones { width: 65%; }
    .form-label { font-weight: 500; margin-bottom: 0.5rem; display: block; color: #495057; }
    textarea.form-control { min-height: 38px; resize: vertical; }
    .form-select { cursor: pointer; }
    .btn-registrar { min-width: 220px; padding: 0.5rem 1.5rem; font-weight: 500; }
    .mb-3 { margin-bottom: 1.2rem !important; }

  .card.shadow.mb-4
    .card-body
      h2.text-center.h5.mb-4 Registros de atención de enfermería durante la Internación
      include componentes/_busquedaPaciente.pug
      #datosInternacion

  .card.shadow.secciones-container(style="display: none;" id="contenedorAtencionEnfermeria")
    .card-body

      // Botones de navegación
      .mb-4.navegacion-secciones
        .card-body
          .row.justify-content-center.g-3
            each seccion, index in ['evaluaciones', 'notas']
              .col-md-2.col-sm-4.col-6
                button.btn.btn-outline-primary.w-100(
                  type="button",
                  data-seccion=seccion
                )= seccion.charAt(0).toUpperCase() + seccion.slice(1)

      #mensajesSeccion.mt-3.text-center

      // 1. Evaluaciones Enfermería
      form.seccion.seccion-1#evaluaciones
        h3.titulo-seccion.text-center Evaluaciones de Enfermería

        .row.mb-3.justify-content-center
          .col-md-4.text-center
            label.form-label(for="parterial") Presión Arterial:
            input.form-control.text-center.mx-auto#parterial(type="text", maxlength="7", placeholder="Ej: 120/80")
          .col-md-2.text-center
            label.form-label(for="fcardiaca") Frec. Cardíaca (lpm):
            input.form-control.text-center.mx-auto#fcardiaca(type="number", min="30", max="220")
          .col-md-2.text-center
            label.form-label(for="frespiratoria") Frec. Resp. (rpm):
            input.form-control.text-center.mx-auto#frespiratoria(type="number", min="8", max="40")
          .col-md-2.text-center
            label.form-label(for="tcorporal") Temp. Corporal (°C):
            input.form-control.text-center.mx-auto#tcorporal(type="number", step="0.1", min="34", max="42")
          .col-md-2.text-center
            label.form-label(for="saturacion") Saturación (%):
            input.form-control.text-center.mx-auto#saturacion(type="number", min="50", max="100")

        .row.mb-3.justify-content-center
          .col-10.text-center
            label.form-label(for="observacionesee") Observaciones:
            input.form-control.text-center.mx-auto#observacionesee(type="text", maxlength="255", style="text-transform: uppercase;")

        .row.mt-3
          .col-12.d-flex.justify-content-center
            button.btn.btn-primary.btn-registrar#btnRegistrarEvaluacion(type="submit") Registrar Evaluación

        table.table.table-bordered.table-sm.tabla.mt-4
          thead
            tr
              th.col-fecha Fecha
              th.col-medico Enfermero
              th.text-center PA
              th.text-center FC
              th.text-center FR
              th.text-center Temp.
              th.text-center SpO₂
              th Observaciones
          tbody#tablaEvaluaciones

      // 2. Notas de Enfermería
      form.seccion.seccion-2#notas
        h3.titulo-seccion.text-center Notas de Enfermería

        .row.mb-3.justify-content-center
          .col-md-10.text-center
            label.form-label(for="notaenfermeria") Nota:
            textarea.form-control.text-center.mx-auto#notaenfermeria(rows="3", style="text-transform: uppercase;")

        .row.mb-3
          .col-12.d-flex.justify-content-center
            button.btn.btn-primary.btn-registrar#btnRegistrarNota(type="submit") Registrar Nota

        table.table.table-bordered.table-sm.tabla
          thead
            tr
              th.col-fecha Fecha
              th.col-medico Enfermero
              th.col-observaciones Nota
          tbody#tablaNotas


  script(src="https://cdn.jsdelivr.net/npm/sweetalert2@11")
  script(type="module", src="/js/atencionenfermeria.js")

  script.
    document.addEventListener('DOMContentLoaded', () => {
      const botones = document.querySelectorAll('button[data-seccion]');
      const secciones = ['evaluaciones', 'notas'];

      function mostrarSeccion(id) {
        secciones.forEach(s => {
          const el = document.getElementById(s);
          if (el) el.style.display = (s === id) ? 'block' : 'none';
        });
      }

      botones.forEach(btn => {
        btn.addEventListener('click', () => {
          mostrarSeccion(btn.dataset.seccion);
        });
      });

      mostrarSeccion('evaluaciones');
    });
